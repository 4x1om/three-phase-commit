# Three phase commit

This repository contains my implementation of Three-Phase Commit (3PC), an extension of Two-phase commit (2PC) used to coordinate distributed atomic transactions over a key/value store. It was developed as a homework assignment for my university's Distributed Systems course.

The implementation follows the standard 3PC flow: Prepare -> PreCommit -> Commit (or Abort). During Prepare, participants attempt to acquire the relevant read/write locks. If this is possible, it votes Yes; otherwise it releases all locks it took and votes No. If any server votes No or timeouts, the coordinator aborts the transaction. Otherwise, the coordinator issues PreCommit, which each server only needs to acknowledge (ACK). If any requests timeout, the coordinator aborts this transaction. Otherwise, the coordinator sends Commit to each server repeatedly until every server responds. Upon receiving Commit, each server applies the transaction and replies with the values of any Get operations. Finally, the coordinator replies back to the client with the values of all Get operations in this transaction.

Unlike 2PC, 3PC is non-blocking: there is no state in which participants will block indefinitely, even in the case of a failed coordinator. The test suite covers various failure modes to ensure that the protocol is implemented correctly. However, the test suite and other wrapper functions have been removed, so this repository is not directly runnable as-is.
